(this["webpackJsonptest-project-to-do-list"]=this["webpackJsonptest-project-to-do-list"]||[]).push([[0],{27:function(t,e,s){},28:function(t,e,s){},52:function(t,e,s){"use strict";s.r(e);var a,o,n=s(0),c=s.n(n),i=s(10),d=s.n(i),r=(s(27),s(28),s(7)),u=s(1),l=c.a.memo((function(t){var e=Object(n.useState)(""),s=Object(r.a)(e,2),a=s[0],o=s[1],c=Object(n.useState)(null),i=Object(r.a)(c,2),d=i[0],l=i[1],f=function(){""!==a.trim()?a.length<20?(t.addItem(a),o("")):l("No more than 20 characters"):l("Title is required")};return Object(u.jsxs)("div",{children:[Object(u.jsx)("input",{value:a,onChange:function(t){return o(t.currentTarget.value)},onKeyPress:function(t){null!==d&&l(null),13===t.charCode&&f()},className:d?"error":""}),Object(u.jsx)("button",{onClick:f,children:"Add"}),d&&Object(u.jsx)("div",{className:"error-message",children:d})]})})),f=c.a.memo((function(t){var e=Object(n.useState)(!1),s=Object(r.a)(e,2),a=s[0],o=s[1],c=Object(n.useState)(t.title),i=Object(r.a)(c,2),d=i[0],l=i[1];return a?Object(u.jsx)("input",{value:d,autoFocus:!0,onBlur:function(){o(!1),t.onChange(d)},onChange:function(t){l(t.currentTarget.value)}}):Object(u.jsx)("span",{onDoubleClick:function(){o(!0),l(t.title)},children:t.title})})),j=s(22),b=s.n(j).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"15f7a0a9-64c3-4a6a-9f8f-a55a7d8541a6"}}),p=function(){return b.get("todo-lists")},h=function(t){return b.delete("todo-lists/".concat(t))},g=function(t){return b.post("todo-lists",{title:t})},k=function(t,e){return b.put("todo-lists/".concat(t),{title:e})},m=function(t){return b.get("todo-lists/".concat(t,"/tasks"))},O=function(t,e){return b.delete("todo-lists/".concat(e,"/tasks/").concat(t))},C=function(t,e){return b.post("todo-lists/".concat(e,"/tasks"),{title:t})},T=function(t,e,s){return b.put("todo-lists/".concat(s,"/tasks/").concat(t),e)};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(a||(a={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(o||(o={}));var v=function(t){var e=Object(n.useCallback)((function(e){return t.changeTaskTitle(t.task.id,e,t.todolistId)}),[t.task.id,t.changeTaskTitle,t.todolistId]);return Object(u.jsxs)("div",{className:t.task.status===a.Completed?"is-done":"",children:[Object(u.jsx)("input",{type:"checkbox",checked:t.task.status===a.Completed,onChange:function(e){return t.changeTasksStatus(t.task.id,e.currentTarget.checked?a.Completed:a.New,t.todolistId)}}),Object(u.jsx)(f,{title:t.task.title,onChange:e}),Object(u.jsx)("button",{onClick:function(){return t.removeTask(t.task.id,t.todolistId)},children:"X"})]})},x=s(4),I=s(9),A=s(5),y=Object(A.b)({name:"app",initialState:{status:"loading",error:null},reducers:{setAppStatusAC:function(t,e){t.status=e.payload.status},setAppErrorAC:function(t,e){t.error=e.payload.error}}}),_=y.reducer,S=y.actions,L=S.setAppStatusAC,w=S.setAppErrorAC,D=Object(A.b)({name:"todolists",initialState:[],reducers:{removeTodolistAC:function(t,e){var s=t.findIndex((function(t){return t.id===e.payload.todolistId}));s>-1&&t.splice(s,1)},addTodolistAC:function(t,e){t.unshift(Object(I.a)({},e.payload.todolist))},changeTodolistTitleAC:function(t,e){var s=t.findIndex((function(t){return t.id===e.payload.todolistId}));t[s].title=e.payload.newTitle},setTodolistsAC:function(t,e){return e.payload.todolists}}}),N=D.reducer,E=D.actions,B=E.removeTodolistAC,P=E.addTodolistAC,F=E.changeTodolistTitleAC,M=E.setTodolistsAC,G=Object(A.b)({name:"tasks",initialState:{},reducers:{removeTaskAC:function(t,e){var s=t[e.payload.todolistId],a=s.findIndex((function(t){return t.id===e.payload.taskId}));a>-1&&s.splice(a,1)},addTaskAC:function(t,e){t[e.payload.task.todoListId].unshift(e.payload.task)},updateTaskAC:function(t,e){var s=t[e.payload.todolistId],a=s.findIndex((function(t){return t.id===e.payload.taskId}));a>-1&&(s[a]=Object(I.a)(Object(I.a)({},s[a]),e.payload.model))},setTasksAC:function(t,e){t[e.payload.todolistId]=e.payload.tasks}},extraReducers:function(t){t.addCase(P,(function(t,e){t[e.payload.todolist.id]=[]})),t.addCase(B,(function(t,e){delete t[e.payload.todolistId]})),t.addCase(M,(function(t,e){e.payload.todolists.forEach((function(e){return t[e.id]=[]}))}))}}),U=G.reducer,W=G.actions,X=W.removeTaskAC,Y=W.addTaskAC,q=W.updateTaskAC,H=W.setTasksAC,J=function(t,e,s){return function(a,o){var n=o().tasks[s].find((function(e){return e.id===t}));if(n){var c={title:n.title,description:n.description,status:n.status,priority:n.priority,startDate:n.startDate,deadline:n.deadline};a(L({status:"loading"})),T(t,c,s).then((function(o){0===o.data.resultCode?(a(q({taskId:t,model:e,todolistId:s})),a(L({status:"succeeded"}))):(a(w({error:"Some error occurred"})),a(L({status:"failed"})))})).catch((function(t){a(w(t.message)),a(L({status:"failed"}))}))}else console.warn("task not found in the state")}},K=c.a.memo((function(t){var e=Object(x.b)();Object(n.useEffect)((function(){var s;e((s=t.id,function(t){t(L({status:"loading"})),m(s).then((function(e){t(H({tasks:e.data.items,todolistId:s})),t(L({status:"succeeded"}))})).catch((function(e){t(w(e.message)),t(L({status:"failed"}))}))}))}),[]);var s=Object(n.useCallback)((function(e){return t.addTask(e,t.id)}),[t.addTask,t.id]),a=Object(n.useCallback)((function(e){return t.changeTodolistTitle(t.id,e)}),[t.changeTodolistTitle,t.id]);return Object(u.jsxs)("div",{children:[Object(u.jsx)(f,{title:t.title,onChange:a}),Object(u.jsx)("button",{onClick:function(){return t.removeTodolist(t.id)},children:"X"}),Object(u.jsx)(l,{addItem:s}),Object(u.jsx)("ul",{children:t.tasks.map((function(e){return Object(u.jsx)(v,{task:e,todolistId:t.id,removeTask:t.removeTask,changeTasksStatus:t.changeTasksStatus,changeTaskTitle:t.changeTaskTitle},e.id)}))})]})})),R=s(6),V=s.n(R),z=function(){return Object(u.jsxs)("div",{className:V.a.loadingWrap,children:[Object(u.jsxs)("div",{className:V.a.cssloadDots,children:[Object(u.jsx)("div",{className:V.a.cssloadDot}),Object(u.jsx)("div",{className:V.a.cssloadDot}),Object(u.jsx)("div",{className:V.a.cssloadDot}),Object(u.jsx)("div",{className:V.a.cssloadDot}),Object(u.jsx)("div",{className:V.a.cssloadDot})]}),Object(u.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:Object(u.jsx)("defs",{children:Object(u.jsxs)("filter",{id:"goo",children:[Object(u.jsx)("feGaussianBlur",{in:"SourceGraphic",result:"blur",stdDeviation:"12"}),Object(u.jsx)("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0\t0 1 0 0 0\t0 0 1 0 0\t0 0 0 18 -7",result:"goo"}),Object(u.jsx)("feBlend",{in2:"goo",in:"SourceGraphic",result:"mix"})]})})})]})},Q=function(){var t=Object(x.c)((function(t){return t.todolists})),e=Object(x.c)((function(t){return t.tasks})),s=Object(x.c)((function(t){return t.app.status})),a=Object(x.c)((function(t){return t.app.error})),o=Object(x.b)();Object(n.useEffect)((function(){o((function(t){t(L({status:"loading"})),p().then((function(e){t(M({todolists:e.data})),t(L({status:"succeeded"}))})).catch((function(e){t(w(e.message)),t(L({status:"failed"}))}))}))}),[]);var c=Object(n.useCallback)((function(t,e){o(function(t,e){return function(s){s(L({status:"loading"})),O(t,e).then((function(a){s(X({taskId:t,todolistId:e})),s(L({status:"succeeded"}))})).catch((function(t){s(w(t.message)),s(L({status:"failed"}))}))}}(t,e))}),[]),i=Object(n.useCallback)((function(t,e){o(function(t,e){return function(s){s(L({status:"loading"})),C(t,e).then((function(t){0===t.data.resultCode?(s(Y({task:t.data.data.item})),s(L({status:"succeeded"}))):(s(w({error:"Some error occurred"})),s(L({status:"failed"})))})).catch((function(t){s(w(t.message)),s(L({status:"failed"}))}))}}(t,e))}),[]),d=Object(n.useCallback)((function(t,e,s){o(J(t,{status:e},s))}),[]),r=Object(n.useCallback)((function(t,e,s){o(J(t,{title:e},s))}),[]),f=Object(n.useCallback)((function(t){o(function(t){return function(e){e(L({status:"loading"})),h(t).then((function(s){e(B({todolistId:t})),e(L({status:"succeeded"}))})).catch((function(t){e(w(t.message)),e(L({status:"failed"}))}))}}(t))}),[]),j=Object(n.useCallback)((function(t){o(function(t){return function(e){e(L({status:"loading"})),g(t).then((function(t){0===t.data.resultCode?(e(P({todolist:t.data.data.item})),e(L({status:"succeeded"}))):(e(w({error:"Some error occurred"})),e(L({status:"failed"})))})).catch((function(t){e(w(t.message)),e(L({status:"failed"}))}))}}(t))}),[]),b=Object(n.useCallback)((function(t,e){o(function(t,e){return function(s){s(L({status:"loading"})),k(t,e).then((function(a){0===a.data.resultCode?(s(F({todolistId:t,newTitle:e})),s(L({status:"succeeded"}))):(s(w({error:"Some error occurred"})),s(L({status:"failed"})))})).catch((function(t){s(w(t.message)),s(L({status:"failed"}))}))}}(t,e))}),[]);return Object(u.jsxs)("div",{className:"App",children:["loading"===s&&Object(u.jsx)(z,{}),a&&Object(u.jsx)("div",{children:a}),Object(u.jsx)(l,{addItem:j}),t.map((function(t){var s=e[t.id];return Object(u.jsx)(K,{id:t.id,title:t.title,tasks:s,removeTask:c,addTask:i,changeTasksStatus:d,removeTodolist:f,changeTaskTitle:r,changeTodolistTitle:b},t.id)}))]})},Z=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,53)).then((function(e){var s=e.getCLS,a=e.getFID,o=e.getFCP,n=e.getLCP,c=e.getTTFB;s(t),a(t),o(t),n(t),c(t)}))},$=s(3),tt=s(8),et=Object($.b)({tasks:U,todolists:N,app:_}),st=Object(A.a)({reducer:et,middleware:function(t){return t().prepend(tt.a)}});d.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(x.a,{store:st,children:Object(u.jsx)(Q,{})})}),document.getElementById("root")),Z()},6:function(t,e,s){t.exports={loadingWrap:"Loading_loadingWrap__3Oauo",cssloadDots:"Loading_cssloadDots__L69ls",cssloadDot:"Loading_cssloadDot__4ceA2","cssload-dot-colors":"Loading_cssload-dot-colors__3Y3qe","cssload-dot-rotate-1":"Loading_cssload-dot-rotate-1__LYv1g","cssload-dot-move":"Loading_cssload-dot-move__mj87V","cssload-dot-rotate-2":"Loading_cssload-dot-rotate-2__1yaub","cssload-dot-rotate-3":"Loading_cssload-dot-rotate-3__1d8uA","cssload-dot-rotate-4":"Loading_cssload-dot-rotate-4__1jLBX"}}},[[52,1,2]]]);
//# sourceMappingURL=main.bc4879ab.chunk.js.map